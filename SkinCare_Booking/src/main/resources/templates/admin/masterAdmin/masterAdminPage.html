<!doctype html>

<html
        lang="en"
        class="layout-menu-fixed layout-compact"
        data-assets-path="/admin/assets/"
        data-template="vertical-menu-template-free">
<!-- Head -->
<div th:replace="admin/fragments/head :: head"></div>

<body>
<!-- Layout wrapper -->
<div class="layout-wrapper layout-content-navbar">
  <div class="layout-container">
    <!-- Menu -->
    <div th:replace="admin/fragments/menu :: menu"></div>
    <!-- / Menu -->

    <!-- Layout container -->
    <div class="layout-page">
      <!-- Navbar -->

      <nav
              class="layout-navbar container-xxl navbar-detached navbar navbar-expand-xl align-items-center bg-navbar-theme"
              id="layout-navbar">
        <div class="layout-menu-toggle navbar-nav align-items-xl-center me-4 me-xl-0 d-xl-none">
          <a class="nav-item nav-link px-0 me-xl-6" href="javascript:void(0)">
            <i class="icon-base bx bx-menu icon-md"></i>
          </a>
        </div>

        <div class="navbar-nav-right d-flex align-items-center justify-content-end" id="navbar-collapse">
          <ul class="navbar-nav flex-row align-items-center ms-md-auto">

            <!-- User -->
            <div th:replace="admin/fragments/user :: user"></div>
            <!--/ User -->
          </ul>
        </div>
      </nav>

      <!-- / Navbar -->

      <!-- Content wrapper -->
      <div class="content-wrapper">
        <!-- Content -->
        <div class="container-xxl flex-grow-1 container-p-y">
          <div class="row">
            <div class="col-xxl-8 mb-6 order-0">
              <div class="card">
                <div class="d-flex align-items-start row">
                  <div class="col-sm-7">
                    <div class="card-body">
                      <h5 class="card-title text-primary mb-3">Welcome Back,
                        <span th:text="${#strings.contains(currentURI, 'manager') ? manager.username :
                        (#strings.contains(currentURI, 'staff') ? staff.username : therapist.username)}"></span> !ðŸŽ‰</h5>
                      <p class="mb-6">
                        Wishing you a productive and energetic workday! ðŸ’ªâœ¨
                      </p>

<!--                      <a href="javascript:;" class="btn btn-sm btn-outline-primary">View Badges</a>-->
                    </div>
                  </div>
                  <div class="col-sm-5 text-center text-sm-left">
                    <div class="card-body pb-0 px-0 px-md-6">
                      <img
                              src="/admin/assets/img/illustrations/man-with-laptop.png"
                              height="175"
                              alt="View Badge User" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div th:if="${#strings.contains(currentURI, 'manager')}" class="col-xxl-4 col-lg-12  order-1">
              <div class="row">
                <div class="col-12 col-md-12 mb-6">
                  <div class="card h-100">
                    <div class="card-body">
                      <div class="card-title d-flex align-items-start justify-content-between mb-4">
                        <div class="avatar flex-shrink-0">
                          <img
                                  src="/admin/assets/img/icons/unicons/wallet-info.png"
                                  alt="wallet info"
                                  class="rounded" />
                        </div>
                      </div>
                      <p class="mb-1">( <strong th:text="${month}"></strong> )  revenue</p>
                      <h4 class="card-title mb-3">$ <span th:text="${sales}"></span></h4>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div th:if="${#strings.contains(currentURI, 'manager')}" class="row">
            <!-- Order Statistics -->
            <div class="col-12 order-0 mb-6">
              <div class="card h-100">
                <div class="card-header d-flex justify-content-between">
                  <div class="card-title mb-0">
                    <h5 class="mb-1 me-2">Order Statistics</h5>
                    <p class="card-subtitle">Total Appointments: <span th:text="${totalAppointments}"></span></p>
                  </div>
                </div>
                <div class="card-body">
                  <div class="d-flex justify-content-between align-items-center mb-6">
                    <div class="d-flex flex-column align-items-center gap-1">
                      <h3 class="mb-1" th:text="${totalAppointments}"></h3>
                      <small>Total Appointments</small>
                    </div>
                    <div id="orderStatisticsChart"></div>
                  </div>
                  <ul class="p-0 m-0">
                    <li class="d-flex align-items-center mb-5">
                      <div class="avatar flex-shrink-0 me-3">
                        <span class="avatar-initial rounded bg-label-primary">
                          <i class="icon-base bx bx-x-circle"></i>
                        </span>
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <h6 class="mb-0">Cancellation Rate</h6>
                          <small>Percentage of canceled appointments</small>
                        </div>
                        <div class="user-progress">
                          <h6 class="mb-0" th:text="${cancellationRate} + '%'"></h6>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex align-items-center mb-5">
                      <div class="avatar flex-shrink-0 me-3">
                        <span class="avatar-initial rounded bg-label-success">
                          <i class="icon-base bx bx-check-circle"></i>
                        </span>
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <h6 class="mb-0">Success Rate</h6>
                          <small>Percentage of completed appointments</small>
                        </div>
                        <div class="user-progress">
                          <h6 class="mb-0" th:text="${successRate} + '%'"></h6>
                        </div>
                      </div>
                    </li>
                    <li class="d-flex align-items-center">
                      <div class="avatar flex-shrink-0 me-3">
                        <span class="avatar-initial rounded bg-label-info">
                          <i class="icon-base bx bx-star"></i>
                        </span>
                      </div>
                      <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
                        <div class="me-2">
                          <h6 class="mb-0">Most Booked Service</h6>
                          <small>SpaService with the highest bookings</small>
                        </div>
                        <div class="user-progress">
                          <h6 class="mb-0" th:text="${mostBookedSpaService}"></h6>
                        </div>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <!--/ Order Statistics -->
          </div>
        </div>
        <!-- / Content -->

        <div class="content-backdrop fade"></div>
      </div>
      <!-- Content wrapper -->
    </div>
    <!-- / Layout page -->
  </div>

  <!-- Overlay -->
  <div class="layout-overlay layout-menu-toggle"></div>
</div>
<!-- / Layout wrapper -->

<!--<div class="buy-now">-->
<!--  <a-->
<!--          href="https://themeselection.com/item/sneat-dashboard-pro-bootstrap/"-->
<!--          target="_blank"-->
<!--          class="btn btn-danger btn-buy-now"-->
<!--  >Upgrade to Pro</a-->
<!--  >-->
<!--</div>-->

<!-- Core JS -->
<div th:replace="admin/fragments/script :: script"></div>
</body>
</html>
