<!doctype html>

<html
        lang="en"
        class="layout-menu-fixed layout-compact"
        data-assets-path="/admin/assets/"
        data-template="vertical-menu-template-free">
<!-- Head -->
<div th:replace="admin/fragments/head :: head"></div>

<body>
<!-- Layout wrapper -->
<div class="layout-wrapper layout-content-navbar">
    <div class="layout-container">
        <!-- Menu -->
        <div th:replace="admin/fragments/menu :: menu"></div>
        <!-- / Menu -->

        <!-- Layout container -->
        <div class="layout-page">
            <!-- Navbar -->

            <nav
                    class="layout-navbar container-xxl navbar-detached navbar navbar-expand-xl align-items-center bg-navbar-theme"
                    id="layout-navbar">
                <div class="layout-menu-toggle navbar-nav align-items-xl-center me-4 me-xl-0 d-xl-none">
                    <a class="nav-item nav-link px-0 me-xl-6" href="javascript:void(0)">
                        <i class="icon-base bx bx-menu icon-md"></i>
                    </a>
                </div>

                <div class="navbar-nav-right d-flex align-items-center justify-content-end" id="navbar-collapse">
                    <ul class="navbar-nav flex-row align-items-center ms-md-auto">

                        <!-- User -->
                        <div th:replace="admin/fragments/user :: user"></div>
                        <!--/ User -->
                    </ul>
                </div>
            </nav>

            <!-- / Navbar -->

            <!-- Content wrapper -->
            <div class="content-wrapper">
                <!-- Content -->
                <div class="container-xxl flex-grow-1 container-p-y">

                    <!-- Users List Table -->
                    <div class="card">
                        <div class="row mx-3 my-0 justify-content-between">
                            <div class="py-3 d-flex align-items-center justify-content-between flex-wrap gap-3">
                                <button class="btn add-new btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasAddUser">
                                    <i class="icon-base bx bx-plus icon-sm me-2"></i>
                                    <span>Add New User</span>
                                </button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <div class="container mt-3">
                                <!-- Alert for Success -->
                                <div
                                        th:if="${successMessage}"
                                        class="alert alert-success alert-dismissible fade show position-relative"
                                        role="alert"
                                >
                                    <span th:text="${successMessage}"></span>
                                </div>

                                <!-- Alert for Error -->
                                <div
                                        th:if="${errorMessage}"
                                        class="alert alert-danger alert-dismissible fade show position-relative"
                                        role="alert"
                                >
                                    <span th:text="${errorMessage}"></span>
                                </div>
                            </div>
                            <table class="table table-bordered table-hover">
                                <thead class="table-light">
                                <tr>
                                    <th style="width: 20%;">User</th>
                                    <th>Role</th>
                                    <th>Contact</th>
                                    <th>Address</th>
                                    <th>Specialty</th>
                                    <th>Actions</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="therapist : ${therapistList}">
                                    <div th:replace="admin/Users/ListTherapist/Therapist/therapist :: therapist"></div>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Offcanvas to add new user -->
                    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasAddUser" aria-labelledby="offcanvasAddUserLabel">
                        <div class="offcanvas-header">
                            <h5 id="offcanvasAddUserLabel" class="offcanvas-title">Add New Therapist</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
                        </div>
                        <div class="offcanvas-body">
                            <form th:action="@{/protected/manager/register-therapist}" method="post">
                                <div class="mb-3">
                                    <label for="add-user-username" class="form-label">Username</label>
                                    <input
                                            type="text"
                                            class="form-control"
                                            id="add-user-username"
                                            name="username"
                                            placeholder="Enter username"
                                            required
                                            pattern="^[a-zA-Z0-9]{3,20}$"
                                            title="Username must be between 3 and 20 characters (letters and numbers only)"
                                    />
                                </div>
                                <div class="mb-3">
                                    <label for="add-user-fullname" class="form-label">Full Name</label>
                                    <input
                                            type="text"
                                            class="form-control"
                                            id="add-user-fullname"
                                            name="fullname"
                                            placeholder="Enter full name"
                                            required
                                            minlength="2"
                                            maxlength="50"
                                            title="Full name must be between 2 and 50 characters"
                                    />
                                </div>
                                <div class="mb-3">
                                    <label for="add-user-img" class="form-label">Image URL</label>
                                    <input
                                            type="url"
                                            class="form-control"
                                            id="add-user-img"
                                            name="img"
                                            placeholder="Enter image URL"
                                            required
                                            pattern="^(http(s?):)([/|.|\\w|\\s|-])*\\.(?:jpg|jpeg|png|webp)$"
                                            title="Image must be a valid URL ending with .jpg, .jpeg, or .png"
                                    />
                                </div>
                                <div class="mb-3">
                                    <label for="add-user-specialty" class="form-label">Specialty</label>
                                    <input
                                            type="text"
                                            class="form-control"
                                            id="add-user-specialty"
                                            name="specialty"
                                            placeholder="Enter specialty"
                                            required
                                            maxlength="100"
                                            title="Specialty must not exceed 100 characters"
                                    />
                                </div>
                                <div class="mb-3">
                                    <label for="add-user-email" class="form-label">Email</label>
                                    <input
                                            type="email"
                                            class="form-control"
                                            id="add-user-email"
                                            name="email"
                                            placeholder="Enter email"
                                            required
                                            maxlength="50"
                                            pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$"
                                            title="Please enter a valid email address"
                                    />
                                </div>
                                <div class="mb-3">
                                    <label for="add-user-phone" class="form-label">Phone</label>
                                    <input
                                            type="text"
                                            class="form-control"
                                            id="add-user-phone"
                                            name="phone"
                                            placeholder="Enter phone number"
                                            required
                                            pattern="^(\\+84|0)[1-9][0-9]{8}$"
                                            title="Invalid phone number format. Ex: 0987654321 or +84987654321"
                                    />
                                </div>
                                <div class="mb-3">
                                    <label for="password" class="form-label">Password</label>
                                    <input
                                            type="password"
                                            class="form-control"
                                            id="password"
                                            name="password"
                                            placeholder="Enter password"
                                            required
                                    />
<!--                                            pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@#$%^&+=!]).{6,40}$"-->
<!--                                            title="Password must contain at least 1 uppercase letter, 1 lowercase letter, 1 number and 1 special character. Ex: Abc@123"-->
                                </div>
                                <button type="submit" class="btn btn-primary">Submit</button>
                                <button type="reset" class="btn btn-secondary" data-bs-dismiss="offcanvas">Cancel</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <!-- / Content -->
        </div>
        <!-- / Layout page -->
    </div>

    <!-- Overlay -->
    <div class="layout-overlay layout-menu-toggle"></div>
</div>
<!-- / Layout wrapper -->

<!-- Core JS -->
<div th:replace="admin/fragments/script :: script"></div>

</body>
</html>
