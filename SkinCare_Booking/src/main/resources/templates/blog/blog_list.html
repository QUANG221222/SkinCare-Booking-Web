<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="user/master/fragments/head :: head"></head>
<body>
<!-- Preloader -->
<div th:replace="user/master/fragments/preloader :: preloader"></div>
<!-- Header -->
<div th:replace="user/master/fragments/header :: header"></div>

<!-- Breadcumb Area -->
<section class="breadcumb-area bg-img d-flex align-items-center justify-content-center"
         style="background-image: url('/user/img/bg-img/bg-10.jpg');">
    <div class="bradcumbContent">
        <h2>Blog List</h2>
    </div>
</section>

<!-- Blog Area Start -->
<div class="blog-area section-padding-0-100">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <!-- Nút tạo mới blog -->
                <a class="btn btn-primary mb-3" th:href="@{/blogs/new}">Create New Blog</a>

                <!-- Thông báo nếu danh sách blog trống -->
                <div th:if="${#lists.isEmpty(blogs)}">
                    <p>No blog posts available.</p>
                </div>

                <!-- Lặp qua danh sách blog -->
                <div th:each="blog, iterStat : ${blogs}">
                    <div class="single-blog-post mb-100 wow fadeInUp"
                         th:attr="data-wow-delay=${iterStat.index * 200 + 'ms'}"
                         style="max-width: 800px; margin: 0 auto;">  <!-- Giới hạn chiều rộng và căn giữa khối blog -->
                        <!-- Post Thumb: căn giữa ảnh -->
                        <div class="blog-post-thumb d-flex justify-content-center mb-3">
                            <!-- Nếu blog.imageUrl có giá trị -->
                            <img th:if="${blog.imageUrl != null and blog.imageUrl != ''}"
                                 th:src="@{${blog.imageUrl}}"
                                 alt="Blog Image"
                                 class="img-fluid"
                                 style="max-width: 100%; height: auto;">
                            <!-- Nếu blog.imageUrl rỗng, dùng ảnh mặc định -->
                            <img th:if="${blog.imageUrl == null or blog.imageUrl == ''}"
                                 src="/images/default.svg"
                                 alt="Default Blog Image"
                                 class="img-fluid"
                                 style="max-width: 100%; height: auto;">
                        </div>
                        <!-- Post Content, căn giữa -->
                        <div class="post-content text-center">
                            <!-- Ngày tạo, định dạng bằng #temporals -->
                            <a href="#" class="post-date btn palatin-btn"
                               th:text="${#temporals.format(blog.createdDate, 'dd MMM yyyy')}">
                                Date
                            </a>
                            <!-- Tiêu đề blog, click để xem chi tiết -->
                            <a th:href="@{'/blogs/' + ${blog.id}}"
                               class="post-title"
                               th:text="${blog.title}">
                                Blog Title
                            </a>
                            <!-- Post Meta -->
                            <div class="post-meta d-flex justify-content-center">
                                <a href="#" class="post-catagory">Category</a>
                                <a href="#" class="post-comments">Comments</a>
                            </div>
                            <!-- Nội dung tóm tắt -->
                            <p th:text="${#strings.abbreviate(blog.content, 200)}">
                                Blog excerpt goes here...
                            </p>
                            <!-- Nút edit & delete -->
                            <div class="mt-3">
                                <a th:href="@{'/blogs/edit/' + ${blog.id}}" class="btn btn-warning">Edit</a>
                                <a th:href="@{'/blogs/delete/' + ${blog.id}}"
                                   class="btn btn-danger"
                                   onclick="return confirm('Are you sure you want to delete?')">
                                    Delete
                                </a>
                            </div>
                        </div> <!-- end post-content -->
                    </div> <!-- end single-blog-post -->
                </div> <!-- end each -->
            </div> <!-- end col-12 -->
        </div> <!-- end row -->
    </div> <!-- end container -->
</div>
<!-- Blog Area End -->

<!-- Footer -->
<div th:replace="user/master/fragments/footer :: footer"></div>
<!-- Script -->
<div th:replace="user/master/fragments/script :: script"></div>
</body>
</html>
