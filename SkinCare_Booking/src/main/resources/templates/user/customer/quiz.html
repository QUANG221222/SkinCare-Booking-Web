<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<div th:replace="user/master/fragments/head :: head"></div>

<body>
<!-- Preloader -->
<div class="preloader d-flex align-items-center justify-content-center">
    <div class="cssload-container">
        <div class="cssload-loading"><i></i><i></i><i></i><i></i></div>
    </div>
</div>

<!-- ##### Header Area Start ##### -->
<div th:replace="user/master/fragments/header :: header"></div>
<!-- ##### Header Area End ##### -->

<!-- ##### Breadcumb Area Start ##### -->
<section
        class="breadcumb-area bg-img d-flex align-items-center justify-content-center"
        style="background-image: url(/user/img/bg-img/bg-10.jpg)"
>
    <div class="bradcumbContent">
        <h2>Skin Care Quiz</h2>
    </div>
</section>
<!-- ##### Breadcumb Area End ##### -->

<!-- ##### Book Now Area Start ##### -->
<div th:replace="user/master/fragments/book-now:: book-now"></div>
<!-- ##### Book Now Area End ##### -->

<section class="breadcrumb-area border-none">
    <div class="container">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb mb-0">
                <li class="breadcrumb-item">
                    <a th:href="@{/protected/customer/home}" class="text-decoration-none">Home</a>
                </li>
                <li class="breadcrumb-item active" aria-current="page">Quiz</li>
            </ol>
        </nav>
    </div>
</section>

<div class="container my-4">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card shadow-lg">
                <div class="card-header text-white text-center">
                    <h3>Khám phá dịch vụ spa phù hợp với bạn</h3>
                </div>
                <div class="card-body">
                    <form id="spaQuizForm">
                        <!-- Mental Issues -->
                        <div class="mb-4">
                            <h5>1. Bạn đang gặp vấn đề gì về tinh thần?</h5>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="mentalIssues" value="stress" id="stress">
                                <label class="form-check-label" for="stress">Căng thẳng, stress</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="mentalIssues" value="tired" id="tired">
                                <label class="form-check-label" for="tired">Mệt mỏi</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="mentalIssues" value="insomnia" id="insomnia">
                                <label class="form-check-label" for="insomnia">Khó ngủ</label>
                            </div>
                        </div>

                        <!-- Skin Issues -->
                        <div class="mb-4">
                            <h5>2. Bạn đang gặp vấn đề gì về da?</h5>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="skinIssues" value="acne" id="acne">
                                <label class="form-check-label" for="acne">Mụn</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="skinIssues" value="darkSpots" id="darkSpots">
                                <label class="form-check-label" for="darkSpots">Thâm nám</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="skinIssues" value="aging" id="aging">
                                <label class="form-check-label" for="aging">Lão hóa</label>
                            </div>
                        </div>

                        <!-- Goals -->
                        <div class="mb-4">
                            <h5>3. Bạn muốn điều gì từ liệu trình spa?</h5>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="goals" value="relax" id="relax">
                                <label class="form-check-label" for="relax">Thư giãn</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="goals" value="beauty" id="beauty">
                                <label class="form-check-label" for="beauty">Làm đẹp</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" name="goals" value="health" id="health">
                                <label class="form-check-label" for="health">Cải thiện sức khỏe</label>
                            </div>
                        </div>

                        <div class="text-center">
                            <button type="submit" class="btn palatin-btn">Nhận kết quả</button>
                            <a href="/protected/customer/home" class="btn palatin-btn">Back to Home</a>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Results Section -->
            <div id="resultContainer" class="mt-4" style="display:none;">
                <div class="card shadow-lg">
                    <div class="card-header text-white text-center">
                        <h3>Dịch vụ được đề xuất cho bạn</h3>
                    </div>
                    <div class="card-body">
                        <div id="recommendedServices"></div>
                        <div class="text-center mt-4">
                            <a href="/protected/customer/services" class="btn palatin-btn">Xem chi tiết dịch vụ</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ##### Footer Area Start ##### -->
<div th:replace="user/master/fragments/footer:: footer"></div>
<!-- ##### Footer Area End ##### -->

<!-- ##### All Javascript Script ##### -->
<div th:replace="user/master/fragments/script"></div>

<script>
    document.getElementById('spaQuizForm').addEventListener('submit', function(e) {
        e.preventDefault();

        const formData = {
            mentalIssues: [...document.querySelectorAll('input[name="mentalIssues"]:checked')].map(el => el.value),
            skinIssues: [...document.querySelectorAll('input[name="skinIssues"]:checked')].map(el => el.value),
            goals: [...document.querySelectorAll('input[name="goals"]:checked')].map(el => el.value)
        };

        const recommendations = getRecommendations(formData);
        displayResults(recommendations);
    });

    function getRecommendations(formData) {
        const recommendations = [];

        if (formData.mentalIssues.includes('stress') || formData.mentalIssues.includes('tired')) {
            recommendations.push({
                name: "Massage Thư Giãn",
                description: "Giúp giảm căng thẳng, mệt mỏi và cải thiện giấc ngủ"
            });
        }

        if (formData.skinIssues.includes('acne')) {
            recommendations.push({
                name: "Điều Trị Mụn Chuyên Sâu",
                description: "Làm sạch sâu và điều trị mụn hiệu quả"
            });
        }

        if (formData.skinIssues.includes('darkSpots') || formData.skinIssues.includes('aging')) {
            recommendations.push({
                name: "Trẻ Hóa Da",
                description: "Giảm thâm nám, chống lão hóa và làm sáng da"
            });
        }

        if (formData.goals.includes('health')) {
            recommendations.push({
                name: "Liệu Trình Detox",
                description: "Thanh lọc cơ thể, cải thiện sức khỏe tổng thể"
            });
        }

        return recommendations;
    }

    function displayResults(recommendations) {
        const resultContainer = document.getElementById('resultContainer');
        const recommendedServicesDiv = document.getElementById('recommendedServices');

        let html = '';
        recommendations.forEach(service => {
            html += `
            <div class="card mb-3">
              <div class="card-body">
                <h5 class="card-title">${service.name}</h5>
                <p class="card-text">${service.description}</p>
              </div>
            </div>
          `;
        });

        recommendedServicesDiv.innerHTML = html;
        resultContainer.style.display = 'block';

        // Scroll to results
        resultContainer.scrollIntoView({ behavior: 'smooth' });
    }
</script>
</body>
</html>